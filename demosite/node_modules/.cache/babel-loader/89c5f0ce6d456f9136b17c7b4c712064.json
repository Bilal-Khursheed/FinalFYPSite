{"ast":null,"code":"import React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nclass Auth {\n  constructor() {\n    this.state = {\n      auth: false,\n      navigate: false,\n      role: 0\n    };\n    this.authenticated = false;\n  }\n\n  login(cb, email, pass) {\n    fetch(\"/user/check/?email=\".concat(email, \"&&pass=\").concat(pass)).then(respone => respone.json()) // .then(() => setTimeout(() => this.setState({ navigate: true }), 2000))\n    .then(Result => {\n      if (Result.status === \"success\") {\n        if (Result.role === \"doctor\") {\n          console.log(\"doctor Login successFully\");\n          this.setState({\n            auth: true\n          });\n          this.setState({\n            role: 1\n          });\n          console.log(\"auth after login is \", this.state.auth);\n          setTimeout(() => this.setState({\n            navigate: true\n          }), 20);\n        } else if (Result.role === \"Admin\") {\n          console.log(\"admin Login successFully\");\n          this.setState({\n            auth: true\n          });\n          this.setState({\n            role: 2\n          });\n          console.log(\"auth after login is \", this.state.auth);\n          setTimeout(() => this.setState({\n            navigate: true\n          }), 20);\n        } else if (Result.role === \"patient\") {\n          console.log(\"patient Login successFully\");\n          this.setState({\n            auth: true\n          });\n          this.setState({\n            role: 3\n          });\n          console.log(\"auth after login is \", this.state.auth);\n          setTimeout(() => this.setState({\n            navigate: true\n          }), 20);\n        } //console.log(\"Login successFully\");\n        //this.setState({ auth: true });\n        // console.log(\"auth after login is \", this.state.auth);\n        //setTimeout(() => this.setState({ navigate: true }), 20);\n        //<Redirect to=\"/admin\"/>;\n\n\n        this.authenticated = true;\n      } else {\n        alert(\"Sorry! Un-authenticated User\");\n        window.location.reload(false);\n      }\n    }).catch(err => console.error(err)); //cb();\n  }\n\n  logout(cb) {\n    this.authenticated = false;\n    cb();\n  }\n\n  isAuthenticated() {\n    return this.authenticated;\n  }\n\n  isnavigation() {\n    return this.state.navigate;\n  }\n\n  isRole() {\n    return this.state.role;\n  }\n\n}\n\nexport default new Auth();","map":{"version":3,"sources":["C:/Users/DELL/Desktop/React Work/demoProject/demosite/src/componets/auth/loginAuth.js"],"names":["React","Component","Link","Redirect","Auth","constructor","state","auth","navigate","role","authenticated","login","cb","email","pass","fetch","then","respone","json","Result","status","console","log","setState","setTimeout","alert","window","location","reload","catch","err","error","logout","isAuthenticated","isnavigation","isRole"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\nclass Auth {\r\n  constructor() {\r\n    this.authenticated = false;\r\n  }\r\n  state = {\r\n    auth: false,\r\n    navigate: false,\r\n    role: 0,\r\n  };\r\n\r\n  login(cb, email, pass) {\r\n    fetch(`/user/check/?email=${email}&&pass=${pass}`)\r\n      .then((respone) => respone.json())\r\n      // .then(() => setTimeout(() => this.setState({ navigate: true }), 2000))\r\n      .then((Result) => {\r\n        if (Result.status === \"success\") {\r\n          if (Result.role === \"doctor\") {\r\n            console.log(\"doctor Login successFully\");\r\n            this.setState({ auth: true });\r\n            this.setState({ role: 1 });\r\n            console.log(\"auth after login is \", this.state.auth);\r\n            setTimeout(() => this.setState({ navigate: true }), 20);\r\n          } else if (Result.role === \"Admin\") {\r\n            console.log(\"admin Login successFully\");\r\n            this.setState({ auth: true });\r\n            this.setState({ role: 2 });\r\n            console.log(\"auth after login is \", this.state.auth);\r\n            setTimeout(() => this.setState({ navigate: true }), 20);\r\n          } else if (Result.role === \"patient\") {\r\n            console.log(\"patient Login successFully\");\r\n            this.setState({ auth: true });\r\n            this.setState({ role: 3 });\r\n            console.log(\"auth after login is \", this.state.auth);\r\n            setTimeout(() => this.setState({ navigate: true }), 20);\r\n          }\r\n          //console.log(\"Login successFully\");\r\n          //this.setState({ auth: true });\r\n          // console.log(\"auth after login is \", this.state.auth);\r\n          //setTimeout(() => this.setState({ navigate: true }), 20);\r\n\r\n          //<Redirect to=\"/admin\"/>;\r\n          this.authenticated = true;\r\n        } else {\r\n          alert(\"Sorry! Un-authenticated User\");\r\n          window.location.reload(false);\r\n        }\r\n      })\r\n      .catch((err) => console.error(err));\r\n\r\n    //cb();\r\n  }\r\n\r\n  logout(cb) {\r\n    this.authenticated = false;\r\n    cb();\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return this.authenticated;\r\n  }\r\n  isnavigation() {\r\n    return this.state.navigate;\r\n  }\r\n  isRole() {\r\n    return this.state.role;\r\n  }\r\n}\r\n\r\nexport default new Auth();\r\n"]},"metadata":{},"sourceType":"module"}