{"ast":null,"code":"const spawn = require('child_process').spawn;\n\nmodule.exports = function (rootPid, callback) {\n  const tree = {};\n  var output = ''; // *nix\n\n  const ps = spawn('ps', ['-A', '-o', 'ppid,pid']);\n  ps.stdout.on('data', data => {\n    output += data.toString('ascii');\n  });\n  ps.on('close', () => {\n    try {\n      const res = output.split('\\n').slice(1).map(_ => _.trim()).reduce((acc, line) => {\n        if (line.indexOf(rootPid + ' ') === 0) {\n          const pid = line.split(/\\s+/).pop();\n          acc.push(parseInt(pid, 10));\n          rootPid = pid;\n        }\n\n        return acc;\n      }, []);\n      callback(null, res);\n    } catch (e) {\n      callback(e, null);\n    }\n  });\n};","map":null,"metadata":{},"sourceType":"script"}