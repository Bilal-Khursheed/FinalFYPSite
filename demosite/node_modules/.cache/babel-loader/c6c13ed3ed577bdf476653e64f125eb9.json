{"ast":null,"code":"'use strict';\n\nvar fs = require('fs');\n/**\n * Parse the nodemon config file, supporting both old style\n * plain text config file, and JSON version of the config\n *\n * @param  {String}   filename\n * @param  {Function} callback\n */\n\n\nfunction parse(filename, callback) {\n  var rules = {\n    ignore: [],\n    watch: []\n  };\n  fs.readFile(filename, 'utf8', function (err, content) {\n    if (err) {\n      return callback(err);\n    }\n\n    var json = null;\n\n    try {\n      json = JSON.parse(content);\n    } catch (e) {}\n\n    if (json !== null) {\n      rules = {\n        ignore: json.ignore || [],\n        watch: json.watch || []\n      };\n      return callback(null, rules);\n    } // otherwise return the raw file\n\n\n    return callback(null, {\n      raw: content.split(/\\n/)\n    });\n  });\n}\n\nmodule.exports = parse;","map":null,"metadata":{},"sourceType":"script"}