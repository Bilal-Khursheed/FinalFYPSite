{"ast":null,"code":"const exec = require('child_process').exec;\n\nconst tree = require('./tree');\n\nconst utils = require('./utils');\n\nvar hasPS = true; // discover if the OS has `ps`, and therefore can use psTree\n\nexec('ps', error => {\n  module.exports.hasPS = hasPS = !error;\n});\n\nmodule.exports = function main(pid, callback) {\n  if (typeof pid === 'number') {\n    pid = pid.toString();\n  }\n\n  if (hasPS && !process.env.NO_PS) {\n    return tree(pid, callback);\n  }\n\n  utils.getStat().then(utils.tree).then(tree => utils.pidsForTree(tree, pid)).then(res => callback(null, res.map(p => p.PID))).catch(error => callback(error));\n};\n\nif (!module.parent) {\n  module.exports(process.argv[2], (e, pids) => console.log(pids));\n}\n\nmodule.exports.hasPS = hasPS;","map":null,"metadata":{},"sourceType":"script"}