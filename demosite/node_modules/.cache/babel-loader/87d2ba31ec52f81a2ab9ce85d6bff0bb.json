{"ast":null,"code":"import React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nclass Auth {\n  constructor() {\n    this.authenticated = false;\n    this.auth = false;\n    this.navigate = false;\n    this.role = 0;\n  }\n  /*state = {\r\n    auth: false,\r\n    navigate: false,\r\n    role: 0,\r\n  };*/\n\n\n  async login(email, pass) {\n    // const email = \"bilal.khursheed617@gmail.com\";\n    // const pass = \"12345\";\n    await fetch(\"/user/check/?email=\".concat(email, \"&&pass=\").concat(pass)) //fetch(`/user/check/?email=\"Bilal.khursheed617@gmail.com\" && pass=\"12345\"`)\n    .then(respone => respone.json()) // .then(() => setTimeout(() => this.setState({ navigate: true }), 2000))\n    .then(Result => {\n      if (Result.status === \"success\") {\n        this.authenticated = true;\n\n        if (Result.role === \"doctor\") {\n          localStorage.setItem(\"doctor\", JSON.stringify(Result));\n          console.log(\"doctor Login successFully\"); //this.setState({ auth: true });\n          //this.setState({ role: 1 });\n\n          this.role = 1; // console.log(\"auth after login is \", this.state.auth);\n          //setTimeout(() => this.setState({ navigate: true }), 20);\\\n\n          setTimeout(() => this.navigate = true, 20); //this.props.history.push(\"/adminportal\");\n        } else if (Result.role === \"Admin\") {\n          localStorage.setItem(\"admin\", JSON.stringify(Result));\n          console.log(\"admin Login successFully\"); //this.props.history.push(\"/adminportal\");\n          //this.setState({ auth: true });\n          //this.setState({ role: 2 });\n\n          this.role = 2; // console.log(\"auth after login is \", this.state.auth);\n\n          setTimeout(() => this.navigate = true, 20);\n          console.log(localStorage.getItem(\"admin\"));\n          var data = localStorage.getItem(\"admin\");\n          var data2 = JSON.parse(data);\n          var detials = JSON.stringify(data2[\"data\"]);\n          console.log(\"data is \" + JSON.stringifydetials['email']);\n        } else if (Result.role === \"patient\") {\n          localStorage.setItem(\"patient\", JSON.stringify(Result));\n          console.log(\"patient Login successFully\"); //this.setState({ auth: true });\n          //this.setState({ role: 3 });\n\n          this.role = 3; // console.log(\"auth after login is \", this.state.auth);\n\n          setTimeout(() => this.navigate = true, 20);\n        } //console.log(\"Login successFully\");\n        //this.setState({ auth: true });\n        // console.log(\"auth after login is \", this.state.auth);\n        //setTimeout(() => this.setState({ navigate: true }), 20);\n        //<Redirect to=\"/admin\"/>;\n        //return true;\n\n      } else {\n        alert(\"Sorry! Un-authenticated User\");\n        window.location.reload(false);\n        return false;\n      }\n    }).catch(err => console.error(err)); // return false;\n\n    this.authenticated = true; //return true;\n    // cb();\n\n    return true;\n  }\n\n  logout() {\n    localStorage.clear();\n  }\n\n  isAuthenticated() {\n    return this.authenticated;\n  }\n\n  isnavigation() {\n    return this.navigate;\n  }\n\n  isRole() {\n    return this.role;\n  }\n\n}\n\nexport default new Auth();","map":{"version":3,"sources":["C:/Users/DELL/Desktop/React Work/demoProject/demosite/src/componets/auth/loginAuth.js"],"names":["React","Component","Link","Redirect","Auth","constructor","authenticated","auth","navigate","role","login","email","pass","fetch","then","respone","json","Result","status","localStorage","setItem","JSON","stringify","console","log","setTimeout","getItem","data","data2","parse","detials","stringifydetials","alert","window","location","reload","catch","err","error","logout","clear","isAuthenticated","isnavigation","isRole"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\nclass Auth {\r\n  constructor() {\r\n    this.authenticated = false;\r\n    this.auth = false;\r\n    this.navigate = false;\r\n    this.role = 0;\r\n  }\r\n  /*state = {\r\n    auth: false,\r\n    navigate: false,\r\n    role: 0,\r\n  };*/\r\n\r\n  async login(email, pass) {\r\n    // const email = \"bilal.khursheed617@gmail.com\";\r\n    // const pass = \"12345\";\r\n    await fetch(`/user/check/?email=${email}&&pass=${pass}`)\r\n      //fetch(`/user/check/?email=\"Bilal.khursheed617@gmail.com\" && pass=\"12345\"`)\r\n      .then((respone) => respone.json())\r\n      // .then(() => setTimeout(() => this.setState({ navigate: true }), 2000))\r\n      .then((Result) => {\r\n        if (Result.status === \"success\") {\r\n          this.authenticated = true;\r\n          if (Result.role === \"doctor\") {\r\n            localStorage.setItem(\"doctor\", JSON.stringify(Result));\r\n            console.log(\"doctor Login successFully\");\r\n            //this.setState({ auth: true });\r\n            //this.setState({ role: 1 });\r\n            this.role = 1;\r\n            // console.log(\"auth after login is \", this.state.auth);\r\n            //setTimeout(() => this.setState({ navigate: true }), 20);\\\r\n\r\n            setTimeout(() => (this.navigate = true), 20);\r\n            //this.props.history.push(\"/adminportal\");\r\n          } else if (Result.role === \"Admin\") {\r\n            localStorage.setItem(\"admin\", JSON.stringify(Result));\r\n            console.log(\"admin Login successFully\");\r\n            //this.props.history.push(\"/adminportal\");\r\n            //this.setState({ auth: true });\r\n            //this.setState({ role: 2 });\r\n            this.role = 2;\r\n            // console.log(\"auth after login is \", this.state.auth);\r\n            setTimeout(() => (this.navigate = true), 20);\r\n            console.log(localStorage.getItem(\"admin\"));\r\n            var data = localStorage.getItem(\"admin\");\r\n            var data2 = JSON.parse(data);\r\n            var detials=JSON.stringify(data2[\"data\"])\r\n\r\n            console.log(\"data is \" + JSON.stringifydetials['email']);\r\n          } else if (Result.role === \"patient\") {\r\n            localStorage.setItem(\"patient\", JSON.stringify(Result));\r\n            console.log(\"patient Login successFully\");\r\n            //this.setState({ auth: true });\r\n            //this.setState({ role: 3 });\r\n            this.role = 3;\r\n            // console.log(\"auth after login is \", this.state.auth);\r\n            setTimeout(() => (this.navigate = true), 20);\r\n          }\r\n          //console.log(\"Login successFully\");\r\n          //this.setState({ auth: true });\r\n          // console.log(\"auth after login is \", this.state.auth);\r\n          //setTimeout(() => this.setState({ navigate: true }), 20);\r\n\r\n          //<Redirect to=\"/admin\"/>;\r\n\r\n          //return true;\r\n        } else {\r\n          alert(\"Sorry! Un-authenticated User\");\r\n          window.location.reload(false);\r\n          return false;\r\n        }\r\n      })\r\n      .catch((err) => console.error(err));\r\n    // return false;\r\n    this.authenticated = true;\r\n    //return true;\r\n    // cb();\r\n    return true;\r\n  }\r\n\r\n  logout() {\r\n    localStorage.clear();\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return this.authenticated;\r\n  }\r\n  isnavigation() {\r\n    return this.navigate;\r\n  }\r\n  isRole() {\r\n    return this.role;\r\n  }\r\n}\r\n\r\nexport default new Auth();\r\n"]},"metadata":{},"sourceType":"module"}